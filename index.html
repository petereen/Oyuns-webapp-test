<!DOCTYPE html>
<html lang="mn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>OYUNS AIO - –í–∞–ª—é—Ç –°–æ–ª–∏—Ö</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Loading Screen -->
    <div id="loading-screen" class="screen active">
        <div class="loading-spinner"></div>
        <p>–£–Ω—à–∏–∂ –±–∞–π–Ω–∞...</p>
    </div>

    <!-- Main Exchange Screen -->
    <div id="main-screen" class="screen">
        <div class="header">
            <h1>üí± –í–∞–ª—é—Ç –°–æ–ª–∏—Ö</h1>
            <p class="subtitle">OYUNS AIO</p>
        </div>

        <!-- Exchange Rates Display -->
        <div class="rates-card">
            <div class="rate-item">
                <span class="rate-label">–ê–≤–∞—Ö —Ö–∞–Ω—à</span>
                <span class="rate-value" id="buy-rate">-</span>
            </div>
            <div class="rate-item">
                <span class="rate-label">–ó–∞—Ä–∞—Ö —Ö–∞–Ω—à</span>
                <span class="rate-value" id="sell-rate">-</span>
            </div>
        </div>

        <!-- Direction Selection -->
        <div class="direction-selector">
            <button class="direction-btn active" data-direction="rub_mnt">
                <span class="flag">üá∑üá∫</span>
                <span>RUB ‚Üí MNT</span>
            </button>
            <button class="direction-btn" data-direction="mnt_rub">
                <span class="flag">üá≤üá≥</span>
                <span>MNT ‚Üí RUB</span>
            </button>
        </div>

        <!-- Promo Code Section -->
        <div class="promo-section" id="promo-section">
            <input type="text" id="promo-input" placeholder="üéüÔ∏è –ü—Ä–æ–º–æ–∫–æ–¥ –æ—Ä—É—É–ª–∞—Ö (—Å–æ–Ω–≥–æ–ª—Ç—Ç–æ–π)" class="promo-input">
            <button id="apply-promo-btn" class="btn-secondary">–•—ç—Ä—ç–≥–ª—ç—Ö</button>
        </div>

        <!-- Amount Selection -->
        <div class="amount-section">
            <label for="amount-input">üí∞ –°–æ–ª–∏—Ö –¥“Ø–Ω</label>
            <div class="amount-input-wrapper">
                <input type="number" id="amount-input" placeholder="0" min="0" step="0.01">
                <span class="currency-display" id="currency-from">RUB</span>
            </div>
            
            <!-- Quick Amount Buttons -->
            <div class="quick-amounts" id="quick-amounts">
                <!-- Will be populated by JS -->
            </div>
        </div>

        <!-- Exchange Preview -->
        <div class="exchange-preview" id="exchange-preview" style="display: none;">
            <div class="preview-row">
                <span>–¢–∞–Ω—ã –¥“Ø–Ω:</span>
                <strong id="preview-from">-</strong>
            </div>
            <div class="arrow-down">‚Üì</div>
            <div class="preview-row">
                <span>–•“Ø–ª—ç—ç–Ω –∞–≤–∞—Ö:</span>
                <strong id="preview-to">-</strong>
            </div>
            <div class="preview-rate">
                <span>–•–∞–Ω—à:</span>
                <span id="preview-rate">-</span>
            </div>
        </div>

        <!-- Continue Button -->
        <button id="continue-btn" class="btn-primary" disabled>“Æ—Ä–≥—ç–ª–∂–ª“Ø“Ø–ª—ç—Ö</button>
    </div>

    <!-- Bank Selection Screen (for RUB ‚Üí MNT) -->
    <div id="bank-screen" class="screen">
        <div class="header">
            <button class="back-btn" onclick="goBack()">‚Üê –ë—É—Ü–∞—Ö</button>
            <h2>üí≥ –ë–∞–Ω–∫ —Å–æ–Ω–≥–æ—Ö</h2>
        </div>
        <div class="bank-list" id="bank-list">
            <!-- Will be populated by JS -->
        </div>
    </div>

    <!-- Payment Instructions Screen -->
    <div id="payment-screen" class="screen">
        <div class="header">
            <button class="back-btn" onclick="goBack()">‚Üê –ë—É—Ü–∞—Ö</button>
            <h2>üí∏ –ì“Ø–π–ª–≥—ç—ç–Ω–∏–π –º—ç–¥—ç—ç–ª—ç–ª</h2>
        </div>
        
        <div class="payment-card">
            <div class="invoice-display">
                <span>–ì“Ø–π–ª–≥—ç—ç–Ω–∏–π –¥—É–≥–∞–∞—Ä:</span>
                <code id="invoice-number">-</code>
            </div>
            
            <div class="bank-details" id="bank-details">
                <!-- Bank details will be shown here -->
            </div>
            
            <div class="amount-display">
                <div class="amount-item">
                    <span>–ì“Ø–π–ª–≥—ç—ç–Ω–∏–π –¥“Ø–Ω:</span>
                    <strong id="payment-amount">-</strong>
                </div>
            </div>
        </div>

        <div class="instructions">
            <p>üì∏ –î–∞—Ä–∞–∞—Ö –¥–∞–Ω—Å–∞–∞—Ä –≥“Ø–π–ª–≥—ç—ç —Ö–∏–π—Å–Ω–∏–π –¥–∞—Ä–∞–∞ —à–∏–ª–∂“Ø“Ø–ª—ç–≥ —Ö–∏–π—Å—ç–Ω –±–∞—Ä–∏–º—Ç–∞–∞ –∑—É—Ä–≥–∞–∞—Ä –æ—Ä—É—É–ª–Ω–∞ —É—É.</p>
        </div>

        <button id="upload-receipt-btn" class="btn-primary">üì∏ –ë–∞—Ä–∏–º—Ç –æ—Ä—É—É–ª–∞—Ö</button>
        <input type="file" id="receipt-input" accept="image/*" capture="environment" style="display: none;">
    </div>

    <!-- Receipt Upload Screen -->
    <div id="receipt-screen" class="screen">
        <div class="header">
            <button class="back-btn" onclick="goBack()">‚Üê –ë—É—Ü–∞—Ö</button>
            <h2>üì∏ –ë–∞—Ä–∏–º—Ç –æ—Ä—É—É–ª–∞—Ö</h2>
        </div>
        
        <div class="upload-area" id="upload-area">
            <div class="upload-placeholder">
                <span class="upload-icon">üì∑</span>
                <p>–ó—É—Ä–≥–∞–∞ —ç–Ω–¥ –¥–∞—Ä–∂ –æ—Ä—É—É–ª–Ω–∞ —É—É</p>
                <p class="upload-hint">—ç—Å–≤—ç–ª –∫–∞–º–µ—Ä –∞—à–∏–≥–ª–∞–Ω –∑—É—Ä–∞–≥ –∞–≤–∞—Ö</p>
            </div>
            <img id="receipt-preview" style="display: none;" alt="Receipt preview">
        </div>
        
        <button id="submit-receipt-btn" class="btn-primary" disabled>–ò–ª–≥—ç—ç—Ö</button>
    </div>

    <!-- Bank Details Input Screen -->
    <div id="bank-details-screen" class="screen">
        <div class="header">
            <button class="back-btn" onclick="goBack()">‚Üê –ë—É—Ü–∞—Ö</button>
            <h2>üè¶ –î–∞–Ω—Å–Ω—ã –º—ç–¥—ç—ç–ª—ç–ª</h2>
        </div>
        
        <div class="form-section">
            <p class="info-text" id="bank-format-info">
                –¢–∞ ”©”©—Ä–∏–π–Ω –¥–∞–Ω—Å–Ω—ã –º—ç–¥—ç—ç–ª–ª–∏–π–≥ –¥–∞—Ä–∞–∞—Ö —Ñ–æ—Ä–º–∞—Ç–∞–∞—Ä –æ—Ä—É—É–ª–Ω–∞ —É—É
            </p>
            
            <div class="saved-bank-option" id="saved-bank-option" style="display: none;">
                <button class="btn-secondary" onclick="useSavedBank()">
                    üíæ –•–∞–¥–≥–∞–ª—Å–∞–Ω –¥–∞–Ω—Å–Ω—ã –º—ç–¥—ç—ç–ª–ª—ç—ç –∞—à–∏–≥–ª–∞—Ö
                </button>
            </div>
            
            <textarea 
                id="bank-details-input" 
                placeholder="–ë–∞–Ω–∫, –î–∞–Ω—Å–Ω—ã –¥—É–≥–∞–∞—Ä, –î–∞–Ω—Å —ç–∑—ç–º—à—ç–≥—á–∏–π–Ω –Ω—ç—Ä..."
                rows="4"
            ></textarea>
            
            <button id="submit-bank-btn" class="btn-primary" disabled>–ò–ª–≥—ç—ç—Ö</button>
        </div>
    </div>

    <!-- Success Screen -->
    <div id="success-screen" class="screen">
        <div class="success-content">
            <div class="success-icon">‚úÖ</div>
            <h2>–ê–º–∂–∏–ª—Ç—Ç–∞–π!</h2>
            <p>–¢–∞–Ω—ã –≥“Ø–π–ª–≥—ç—ç–Ω–∏–π —Ö“Ø—Å—ç–ª—Ç —Ö“Ø–ª—ç—ç–Ω –∞–≤–ª–∞–∞.</p>
            <p class="success-note">–ê–¥–º–∏–Ω —Ç–∞–Ω—ã –≥“Ø–π–ª–≥—ç—ç–≥ –±–∞—Ç–∞–ª–≥–∞–∞–∂—É—É–ª–∞—Ö —Ö“Ø—Ä—Ç—ç–ª —Ö“Ø–ª—ç—ç–Ω—ç “Ø“Ø.</p>
            <button class="btn-primary" onclick="resetApp()">–®–∏–Ω—ç –≥“Ø–π–ª–≥—ç—ç</button>
        </div>
    </div>

    <!-- Error Toast -->
    <div id="error-toast" class="toast">
        <span id="error-message"></span>
    </div>

    <script src="config.js"></script>
    <script src="app.js"></script>
</body>
</html>

